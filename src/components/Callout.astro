---
import { Icon } from "astro-icon/components";

interface Props {
  type?: "note" | "tip" | "warning" | "danger" | "info";
  title?: string;
}

const { type = "note", title } = Astro.props;

const config = {
  note: {
    icon: "fa6-solid:note-sticky",
    cssVar: "note",
    defaultTitle: "หมายเหตุ",
  },
  tip: {
    icon: "fa6-solid:lightbulb",
    cssVar: "tip",
    defaultTitle: "เคล็ดลับ",
  },
  warning: {
    icon: "fa6-solid:triangle-exclamation",
    cssVar: "warning",
    defaultTitle: "คำเตือน",
  },
  danger: {
    icon: "fa6-solid:circle-exclamation",
    cssVar: "danger",
    defaultTitle: "อันตราย",
  },
  info: {
    icon: "fa6-solid:circle-info",
    cssVar: "info",
    defaultTitle: "ข้อมูล",
  },
};

const style = config[type];
const displayTitle = title || style.defaultTitle;
---

<div
  class="callout border-l-4 rounded-r-lg pt-4 px-4 my-6 shadow-sm"
  style={`
    background-color: var(--callout-${style.cssVar}-bg);
    border-color: var(--callout-${style.cssVar}-border);
  `}
>
  <div class="flex items-start gap-3">
    <Icon
      name={style.icon}
      class="w-5 h-5 shrink-0 mt-1"
      style={`color: var(--callout-${style.cssVar}-icon);`}
    />
    <div class="flex-1 min-w-0">
      <p
        class="font-semibold mb-1!"
        style={`color: var(--callout-${style.cssVar}-title);`}
      >
        {displayTitle}
      </p>
      <div class="prose dark:prose-invert prose-xs max-w-none text-base">
        <slot />
      </div>
    </div>
  </div>
</div>
